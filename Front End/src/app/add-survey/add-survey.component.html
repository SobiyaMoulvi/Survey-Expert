<app-navbar></app-navbar>
<div class="container mt-4">
    <div class="card">
      <h4 class="card-header">Enter Your Survey Details !</h4>
      <div class="card-body">
        <form [formGroup]="myForm" (ngSubmit)="onSubmit()" #f="ngForm">
            <div class="form-group">
              <label for="name">Name</label>
              <input type="text"
                     id="name"
                     class="form-control"
                     placeholder="Name"
                     name="name"
                     formControlName="name"
                     required>
            </div>

            <div formArrayName="questionList">
              <div style="margin-top:5px; margin-bottom:5px;" *ngFor="let question of myForm.get('questionList')['controls']; let i=index">
                <fieldset>
                  <legend><h4>question {{i+1}}:
          </h4></legend>
                  <div [formGroupName]="i">
                    <div class="form-inline">
                      <div class="form-group">
                        <label style="margin-right:80px;" class="col-form-label" for="question">question</label>
                        <input type="text"
                               class="form-control"
                               id="question"
                               placeholder="question"
                               name="type"
                               formControlName="question" 
                               style="margin-right:5px;" 
                               required>
                        <button style="margin-right:5px;"  type="button" class="btn btn-success btn-sm" (click)="addNewoption(question.controls.optionList)">
                          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add New Address Line
                        </button>
                        
          
                      </div>
                    </div>
                    <div class="form-inline">
                      <div class="form-group">
                        <div formArrayName="optionList">
                          <div style="margin-top:5px; margin-bottom:5px;" *ngFor="let lines of question.get('optionList').controls; let j=index">
                            <div [formGroupName]="j">
                              <div class="form-group">
                              <label style="margin-right:5px;"  class="col-form-label" for="emailId">Address Line {{j + 1}}</label>
                              <input formControlName="option"
                                     class="form-control"
                                     style="margin-right:5px;" 
                                     type="email"
                                     placeholder="Address lines"
                                     id="address"
                                     name="address"
                                      />
                           <button style="margin-right:5px;" type="button" class="btn btn-danger btn-sm" (click)="deleteoption(question.controls.optionList, j)">
          <span class="glyphicon glyphicon-minus"aria-hidden="true">Remove Option</span>
          </button>
          
          
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <button style="margin-left:35px;" type="button" class="btn btn-danger" (click)="deletequestion(i)">
                    <span class="glyphicon glyphicon-minus"aria-hidden="true"></span> Remove question
                    </button>
                </fieldset>
              </div>
            </div>
            <button type="button" class="btn btn-primary btn-sm" (click)="addNewquestion()">
                 Add New question
              </button>
            
            <button type="submit" class="btn btn-success">Submit</button>
            <button type="button" class="btn btn-danger" >Cancel</button>
          </form>

    </div>
  </div>
</div>



<pre>{{myForm.value | json}}</pre>